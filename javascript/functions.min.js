function initDrawH3list(){var t="",e=".sidebar-menu>li.active>span.submenu",a=!1,i=0;$("h3").each((function(){a=this.id?this.id:"h3"+this.innerHTML.replace(/\W/g,""),this.id||(this.id=a),"h3menu"!==this.id&&(i++,t+='<li><a href="#'+a+'" class="scroll-link"><i class="fas fa-angle-right"></i>&nbsp;'+this.innerHTML.replace(/(<([^>]+)>)/gi,"")+"</a></li>")})),i<2?(t="",$(e).hide()):$(e).html('<ul class="treeview-menu" style="display: block;">'+t+"</ul>")}function initSoftscroll(){$((function(){$("a.scroll-link").click((function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var t=$(this.hash);if((t=t.length?t:$("[name="+this.hash.slice(1)+"]")).length)return $("html,body").animate({scrollTop:t.offset().top-30},300),!1}}))}))}function filterServer(t){var e=0;"null"===t&&(t=""),localStorage.setItem("apachestatusFilterServer",t),$("#serverlist ul li a").each((function(){!t||$(this).html().indexOf(t)>=0?(e++,$(this).css("display","block")):$(this).css("display","none")})),$("#srvcounter").html(t?e:""),$("#serverlist ul li.active a").each((function(){$(this).css("display","block")}));var a=e<25;$("#serverlist>li ").each((function(){a?$(this).removeClass("dropdown-submenu"):$(this).addClass("dropdown-submenu"),$(this).attr("onmouseover",a?"":"$(this).addClass('open');"),$(this).attr("onmouseout",a?"":"$(this).removeClass('open');")})),$("#serverlist li ul").each((function(){a?$(this).removeClass("dropdown-menu"):$(this).addClass("dropdown-menu"),iCountItems=$(this).find("li>a").length,iCountVisibleItems=0,oUL=$(this),$(oUL).find("li>a").each((function(){"block"===$(this).css("display")&&iCountVisibleItems++})),sInfotext=iCountVisibleItems!=iCountItems?iCountVisibleItems+"/ "+iCountItems:iCountItems,$(oUL).prev().children(".info").html(" ("+sInfotext+")"),$(oUL).prev().css("display",iCountVisibleItems?"block":"none")}))}function initServerFilter(){var t=0;$("#serverlist li").each((function(){t++}));var e=localStorage.getItem("apachestatusFilterServer")+"";if(void 0===e&&(e=""),t>5){$("#serverlist >li>a").append('<span class="info" style="margin-right: 1em;">-</span>');var a='<li><form class="form-inline">\n            <div class="form-group" style="margin-bottom: 0.5em; min-width: 20em;">\n                <input type="text" id="esrvfilter" style="margin-left: 1em;" \n                    onkeypress="filterServer(this.value);" class="form-control" onkeydown="filterServer(this.value);" onkeyup="filterServer(this.value);" \n                    placeholder="'+aLang.srvFilterPlaceholder+'"\n                    value="'+e+'" />\n                <span id="srvcounter"></span>\n            </div></form></li>';$("#serverlist").prepend(a)}filterServer(e)}function initTileProgress(){var t=!1,e=!1;$(".progress-bar").each((function(){if(sId=$(this).attr("id").replace(/^progress\-/,""),sSrv=sId.replace(/\-.*/,""),t=sId.replace(/^.*\-/,"")){var a=new counterhistory(sSrv,t);e=a.getLast(50),aDataLast=a.getLast(1),currentVal=aDataLast.max,e&&$("#progress-"+sId).css("width",currentVal/e.max*100+"%")}}))}function initServertab(){$('*[data-toggle="tab"]').each((function(){$(this).click((function(){var t=$($(this).contents()[1]).text();localStorage.setItem("srvtab",t)}))}));var t=localStorage.getItem("srvtab");t&&$('*[data-toggle="tab"]').each((function(){$($(this).contents()[1]).text()==t&&$(this).click()}))}function initPage(){initDrawH3list(),initSoftscroll(),initServerFilter(),initTileProgress(),initServertab(),$("body").append('<div id="'+sDivPlotter+'" class="plotter"></div>')}function showTab(t){return mydiv=".subh2 ",$(mydiv+" > h3").hide(),$(mydiv+" > .subh3").hide(),$(mydiv+" > "+t).show(),$(mydiv+" > "+t+" + div.subh3").show(),$(mydiv+" li a").blur(),!1}var sDivPlotter="divPlotter",bPlotterSticky=!1;function stickyGraph(t,e,a){var i=bPlotterSticky;bPlotterSticky=!1,$("#"+sDivPlotter+" .btnclose").hide(),showGraph(t,e,a),i||(bPlotterSticky=!0,$("#"+sDivPlotter+" .btnclose").show())}function showGraphInline(t,e,a,i,s,r,n){var l=new counterhistory(e,a).getLast(i);if(n)var o=new counterhistory(e,n).getLast(i);var d=t+"-chart";if(!l||!l.data||!l.data.length||!1===l.min)return!1;for(var c="",h="",u="",v="",p=[],f="",b="",m=l.data.length-1;m>=0;m--){var g=l.data[m];if(p.push(new Date(g[0])),c+=(c?", ":"")+(g[1]/1===g[1]?g[1]:'"'+g[1]+'"'),h+=(h?", ":"")+l.avg,u+=(u?", ":"")+(r||l.max),v+=(v?", ":"")+l.min,n){var y=o.data[m];y&&(b+=(b?", ":"")+(y[1]/1===y[1]?y[1]:'"'+y[1]+'"'))}}aLang&&(f+="values: "+l.data.length+"<br>",f+=aLang.statsCurrent?aLang.statsCurrent+": "+l.data[0][1]+"<br>":"",f+=aLang.statsMin?aLang.statsMin+": "+l.min+"<br>":"",f+=aLang.statsMax?aLang.statsMax+": "+l.max+"<br>":"",f+=aLang.statsAvg?aLang.statsAvg+": "+l.avg+"<br>":""),$("#"+t).html('<div class="infos">'+f+'</div><canvas id="'+d+'"></canvas>');var S=document.getElementById(d).getContext("2d");new Chart(S,{type:"bar",data:{labels:p,datasets:[{type:"bar",label:s,data:JSON.parse("["+c+"]"),borderColor:"#80d0f4",backgroundColor:"#80d0f4",fill:!0,lineTension:0,radius:0},{type:"line",label:n,data:JSON.parse("["+b+"]"),borderColor:"#aaaaaa",backgroundColor:"#eeeeee",borderWidth:1,borderDash:[3,1],fill:!0,radius:0},{type:"line",label:aLang.statsMax,data:JSON.parse("["+u+"]"),borderColor:"#ff0000",backgroundColor:"#ff0000",borderWidth:1,borderDash:[3,3],fill:!1,radius:0},{type:"line",label:aLang.statsAvg,data:JSON.parse("["+h+"]"),borderColor:"#e0a010",backgroundColor:"#e0a010",borderWidth:1,borderDash:[3,3],fill:!1,radius:0},{type:"line",label:aLang.statsMin,data:JSON.parse("["+v+"]"),borderColor:"#008000",backgroundColor:"#008000",borderWidth:1,borderDash:[3,3],fill:!1,radius:0}]},options:{animation:{duration:0},scales:{x:{display:!1},y:{ticks:{beginAtZero:!0,max:r||l.max}}},plugins:{legend:{display:!1},title:{display:!1,text:s}}}});return!0}function showGraph(t,e,a){if(bPlotterSticky)return!1;var i='<div class="btnclose" onclick="hideGraph(1);"> X </div><div class="title">'+a+'</div><div id="hovergraph" class="graph"></div>';$("#"+sDivPlotter).html(i).show(),showGraphInline("hovergraph",t,e,50,a)||$("#"+sDivPlotter).hide()}function hideGraph(t){if(t&&(bPlotterSticky=!1),bPlotterSticky)return!1;$("#"+sDivPlotter).hide()}function twodigits(t){return t>9?t:"0"+t}